<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>検索テスト</title>
</head>
<body>
  <textarea id="text" rows="4" cols="40">
JavaScriptで文字列検索をして、検索ヒット数を数えます。
JavaScriptの練習です。
  </textarea>
  <br>
  <input type="text" id="keyword" placeholder="検索キーワード">
  <button id="searchBtn">検索</button>
  <p>ヒット数: <span id="count">0</span></p>

  <script>
    const textArea = document.getElementById("text");
    const keywordInput = document.getElementById("keyword");
    const searchBtn = document.getElementById("searchBtn");
    const countSpan_2 = document.getElementById("count");

    searchBtn.addEventListener("click", () => {
      const text = textArea.value; //テキストエリアの中の文章を text という変数に入れる。
      const keyword = keywordInput.value; //検索したい文字 を取得して keyword に入れる

      // 検索キーワードが空（未入力）だった場合の処理。キーワード未入力なら0で終了
      if (!keyword) {
        countSpan_2.textContent = 0;
        return;
      }

      const parts = text.split(keyword);
      const hits = parts.length - 1;
      countSpan_2.textContent = hits;
    });
  </script>
</body>
</html>

<!-- split() は 文字列を分割するメソッド。 -->
<!-- text = "abcXYZdefXYZghi" -->
<!-- keyword = "XYZ" -->
<!-- 上の例なら -->
<!-- text.split("XYZ") は 以下のようになる -->
<!-- ["abc", "def", "ghi"] -->

<!-- const hits = parts.length - 1; -->
<!-- 分割してできた配列の要素数（parts.length）から1引いた値がヒット数になる。 -->
<!-- ["abc", "def", "ghi"] → length = 3 -->
<!-- hits = 3 - 1 = 2 -->

<!-- countSpan.textContent = hits; -->
<!-- <span id="count">0</span> -->
<!-- に検索結果（ヒット数）を書き込む。 -->





<!-- ある程度スクロールしたら「ページトップへ」ボタンを表示し、 -->
<!-- クリックしたらページの一番上に戻るようにしてください。 -->
<style>
#toTop {
  position: fixed;
  right: 20px;
  bottom: 20px;
  display: none;
}
</style>

<div style="height:1500px;">
  スクロールしてください
</div>

<button id="toTop">ページトップへ</button>

<script>
const toTopBtn = document.getElementById("toTop");

window.addEventListener("scroll", () => {
  if (window.scrollY > 200) {
    toTopBtn.style.display = "block"; //スクロール量が200pxより大きい場合ボタンを表示する。
  } else {
    toTopBtn.style.display = "none"; //スクロール量が200px以下の場合ボタンを隠す。
  }
});
//ページのスクロール位置を変更する関数。
toTopBtn.addEventListener("click", () => {
  window.scrollTo({
    top: 0,//ページの一番上へ移動
    behavior: "smooth"
  });
});
</script>



<!-- 「開く」ボタンを押すとモーダルを表示し、
「閉じる」ボタンを押すとモーダルを閉じてください。 -->

<button id="openModal">開く</button>

<div id="modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5);">
  <div style="background:#fff; margin:100px auto; padding:20px; width:300px;">
    <p>モーダルの中身です</p>
    <button id="closeModal">閉じる</button>
  </div>
</div>
<script>
  const openModal = document.getElementById("openModal");
  const closeModal = document.getElementById("closeModal");
  const modal = document.getElementById("modal");

  openModal.addEventListener("click", () => {
    modal.style.display = "block";
  });
  closeModal.addEventListener("click", () => {
    modal.style.display = "none";
  });
</script>